# ğŸš€ Droid-Tushare: å·¥ä¸šçº§ Tushare æ•°æ®æœ¬åœ°åŒ–åŒæ­¥å¼•æ“

**è®©é‡åŒ–äº¤æ˜“è€…å‘Šåˆ«ç½‘ç»œå»¶è¿Ÿä¸é¢‘ç‡é™åˆ¶ï¼Œæ„å»ºå±äºè‡ªå·±çš„é«˜æ€§èƒ½æœ¬åœ°é‡‘èæ•°æ®åº“ã€‚**

`Droid-Tushare` æ˜¯ä¸€ä¸ªä¸ºä¸“ä¸šé‡åŒ–äº¤æ˜“è€…è®¾è®¡çš„æœ¬åœ°åŒ–æ•°æ®åŒæ­¥æ–¹æ¡ˆã€‚å®ƒä¸ä»…æ˜¯å°† Tushare æ•°æ®å­˜å…¥æ•°æ®åº“ï¼Œæ›´æ˜¯é€šè¿‡ **DuckDB** çš„åˆ—å¼å­˜å‚¨ä¼˜åŠ¿ã€**æ™ºèƒ½åˆ†é¡µç®—æ³•** ä»¥åŠ **è‡ªåŠ¨åŒ–å¼‚å¸¸æ ¡éªŒ**ï¼Œè§£å†³é‡‘èæ•°æ®è·å–ä¸­çš„æ‰€æœ‰ç—›ç‚¹ã€‚

---

## âœ¨ æ ¸å¿ƒä¼˜åŠ¿

### 1. âš¡ æè‡´æ€§èƒ½ï¼šç”± DuckDB é©±åŠ¨

* **æ¯«ç§’çº§æŸ¥è¯¢**ï¼šåˆ©ç”¨ DuckDB å‘é‡åŒ–æ‰§è¡Œå¼•æ“ï¼Œå³ä½¿æ˜¯äº¿çº§è¡Œæƒ…æ•°æ®ï¼Œå¤æ‚èšåˆæŸ¥è¯¢ä¹Ÿèƒ½åœ¨æ¯«ç§’å†…å®Œæˆã€‚
* **è½»é‡æŒä¹…åŒ–**ï¼šæ— éœ€å®‰è£…åºå¤§çš„æ•°æ®åº“æœåŠ¡ç«¯ï¼Œå•æ–‡ä»¶å­˜å‚¨ï¼Œæè‡´æ˜“è¯»ã€‚

### 2. ğŸ§  æ™ºèƒ½åŒæ­¥é€»è¾‘

* **å…¨è‡ªåŠ¨åˆ†é¡µ**ï¼šè‡ªåŠ¨å¤„ç† Tushare æ¥å£ 2000/5000 è¡Œé™åˆ¶ï¼Œé€šè¿‡ `limit` ä¸ `offset` æ™ºèƒ½é€’å½’æ‹‰å–ã€‚
* **è‡ªé€‚åº”é¢‘æ§**ï¼šå†…ç½®é™æµç›‘æµ‹ï¼Œè‡ªåŠ¨è§¦å‘ 65 ç§’å†·å´é‡è¯•ï¼Œç¡®ä¿ 7x24 å°æ—¶æ— äººå€¼å®ˆè¿è¡Œã€‚
* **å¢é‡ä¼˜å…ˆ (Slow is Fast)**ï¼šæ”¯æŒ `full_paging` æ¨¡å¼ï¼Œé€šè¿‡å¯¹æ¯”æœ¬åœ°æœ€å¤§æ—¥æœŸå®ç°â€œç§’çº§è¡¥å½•â€ï¼Œç¡®ä¿æ¶æ„çš„å¯ç»´æŠ¤æ€§ä¸æ•°æ®ä¸€è‡´æ€§ã€‚

### 3. ğŸ›¡ï¸ å·¥ä¸šçº§æ•°æ®è´¨é‡ä¿éšœ

* **å¼‚å¸¸æ—¥æœŸæ£€æµ‹**ï¼šå†…ç½® `Mean-2*Std` ç®—æ³•è‡ªåŠ¨è¯†åˆ«æ•°æ®ç¼ºå¤±ä¸å¼‚å¸¸å¤©ã€‚
* **å¤šç»´æ ¡éªŒæŠ¥å‘Š**ï¼šäº¤äº’å¼ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Šã€ç¼ºå¤±èŒƒå›´å®šä½ä»¥åŠéäº¤æ˜“æ—¥å¼‚å¸¸è®°å½•æç¤ºã€‚

### 4. ğŸ—‚ï¸ å…¨å“ç§è¦†ç›– (Ready-to-use)

å†…ç½®æ•°åç§é‡‘èè¡¨ç»“æ„å®šä¹‰ï¼Œå¼€ç®±å³ç”¨ï¼š

* **è‚¡ç¥¨**ï¼šè¡Œæƒ…ã€å¤æƒå› å­ã€æ¯æ—¥æŒ‡æ ‡ã€å¤‡ç”¨åˆ—è¡¨ã€‚
* **åŸºé‡‘/æœŸæƒ/æœŸè´§**ï¼šåˆçº¦åŸºç¡€ä¿¡æ¯ã€æ—¥çº¿è¡Œæƒ…ã€æŒä»“ã€ç»“ç®—æ•°æ®ã€‚
* **å®è§‚/å€ºåˆ¸**ï¼šShiborã€ç¾å€ºæ”¶ç›Šç‡ã€å¯è½¬å€ºåŸºç¡€åŠæ—¥çº¿ã€‚

---

## ğŸ—ï¸ æ¶æ„è®¾è®¡

ä»£ç ç»“æ„éµå¾ª**è§£è€¦è®¾è®¡**ï¼Œç¡®ä¿é•¿æœŸå¯ç»´æŠ¤æ€§ï¼š

* **`fetcher.py`**ï¼šè´Ÿè´£ API é€šä¿¡ã€å¼‚å¸¸é‡è¯•ä¸åˆ†é¡µã€‚
* **`processor.py`**ï¼šåŒæ­¥å¼•æ“æ ¸å¿ƒï¼Œè°ƒåº¦æ—¥æœŸå¾ªç¯ä¸å‚æ•°çŸ©é˜µã€‚
* **`storage.py`**ï¼šåŸºäº DuckDB çš„åŸå­åŒ–å­˜å‚¨ï¼Œæ”¯æŒ `insert_new`ï¼ˆå»é‡æ’å…¥ï¼‰ä¸ `replace`ï¼ˆè¦†ç›–ï¼‰ã€‚
* **`data_validation.py`**ï¼šæ•°æ®å¥åº·ä½“æ£€å·¥å…·é›†ã€‚

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡

```bash
git clone https://github.com/robert/droid_tushare.git
cd droid_tushare
pip install -r requirements.txt

```

### 2. é…ç½®ç§˜é’¥

åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `.env` æ–‡ä»¶ï¼š

```env
TUSHARE_TOKEN=æ‚¨çš„Tushare_Token
DB_ROOT=/æ‚¨çš„æ•°æ®å­˜å‚¨è·¯å¾„/DuckDB

```

### 3. è¿è¡Œäº¤äº’å¼ç»ˆç«¯

```bash
python -m tushare_duckdb.main

```

é€šè¿‡ç›´è§‚çš„èœå•ï¼Œæ‚¨å¯ä»¥ï¼š

1. é€‰æ‹©åˆ†ç±»åŒæ­¥æ•°æ®ã€‚
2. è¾“å…¥ `11` æŸ¥çœ‹æ•°æ®åº“çŠ¶æ€ä¸è¦†ç›–ç‡æŠ¥å‘Šã€‚
3. æ‰§è¡Œç‰¹å®šä»£ç æˆ–æ—¥æœŸçš„å¼ºåˆ¶è¦†ç›–ã€‚

---

## ğŸ“Š ä¸šåŠ¡ç»Ÿè®¡ç¤ºä¾‹

æ•°æ®æ›´æ–°å®Œæˆåï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ç”Ÿæˆä¸šåŠ¡åˆ†ææŠ¥å‘Šï¼Œå¸®åŠ©æ‚¨ç›´è§‚æŒæ¡æ•°æ®åŠ¨æ€ï¼š

```text
>>>> [stock_basic] ä¸šåŠ¡ç»Ÿè®¡æŠ¥å‘Š <<<<
+---------------+-----------+
| list_status   |   count() |
|---------------+-----------|
| L(ä¸Šå¸‚)        |      5342 |
| D(é€€å¸‚)        |       215 |
| P(æš‚åœä¸Šå¸‚)     |        12 |
+---------------+-----------+

```

---

## ğŸ¤ è´¡çŒ®ä¸åé¦ˆ

æœ¬é¡¹ç›®ç§‰æ‰¿ **"Slow is Fast"** çš„å¼€å‘å“²å­¦ï¼Œä¼˜å…ˆè€ƒè™‘æ¨ç†è´¨é‡ä¸é•¿æœŸçš„å¯ç»´æŠ¤æ€§ã€‚å¦‚æœæ‚¨æœ‰ä»»ä½•ä¼˜åŒ–å»ºè®®ï¼Œæ¬¢è¿æäº¤ Issueã€‚
